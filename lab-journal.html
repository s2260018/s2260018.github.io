<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-05-06 Mon 15:17 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lab Journal</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" href="/simple.css">
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Lab Journal</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgb6057cd">Introduction</a>
<ul>
<li><a href="#orgcadcbb5">Personal Details</a></li>
</ul>
</li>
<li><a href="#orge3f8e72">Session 1</a></li>
<li><a href="#orgb245622">Session 2</a></li>
<li><a href="#orgeae1c80">Session 3</a></li>
<li><a href="#org84f31d0">Session 4</a></li>
<li><a href="#orgc7747a3">Session 5</a></li>
<li><a href="#org7bf7bc2">Session 6</a></li>
</ul>
</div>
</nav>
<div id="outline-container-orgb6057cd" class="outline-2">
<h2 id="orgb6057cd">Introduction</h2>
<div class="outline-text-2" id="text-orgb6057cd">
<p>
This is the lab journal for Physics Experiments 3, 2024.
</p>
</div>
<div id="outline-container-orgcadcbb5" class="outline-3">
<h3 id="orgcadcbb5">Personal Details</h3>
<div class="outline-text-3" id="text-orgcadcbb5">
<dl class="org-dl">
<dt>Name</dt><dd>Luuk de Jong</dd>
<dt>Student number</dt><dd>s2260018</dd>
<dt>Instructor</dt><dd>Dr.ir. P.S.W.M. Logman</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-orge3f8e72" class="outline-2">
<h2 id="orge3f8e72">Session 1</h2>
<div class="outline-text-2" id="text-orge3f8e72">
<p>
Session 1, 23rd of April 2024
</p>
<ul class="org-ul">
<li>Preparatory files:
<ul class="org-ul">
<li><a href="proposal/proposal.pdf">Proposal</a></li>
<li><a href="proposal/tra.pdf">Task Risk Analysis</a></li>
<li><a href="planning/planning.html">Planning</a></li>
</ul></li>
<li>Based on received feedback, the task risk analysis and the proposal were amended.</li>
<li>Some time was spent on planning the coming sessions.</li>
<li>Building the setup:
<ul class="org-ul">
<li>The following parts have been ordered:
<ul class="org-ul">
<li>9 Volt battery;</li>
<li>Integrated Systems LSK189-TO-92-3L-BK JFETs (10 pc.);</li>
<li>Linear Technology LT1023CN8PBF Op Amps (2 pc.);</li>
<li>Resistors: 390 Ω, 39 kΩ, 10 MΩ, 100 of each;</li>
<li>Capacitors: 150 pF (50 pc.);</li>
</ul></li>
<li>Two 1 μF capacitors (cylindrical, black Jackcon), a 100 nF (very small, light blue, marked "104k") and a 1.5 nF capacitor (flat, orange, marked "152") have been taken from the capacitor box;
<ul class="org-ul">
<li>A slightly darker blue one was between the 100 nF capacitors, the barely legible marking "104k" confirms the light blue one is correct.</li>
</ul></li>
<li>Two 1 kΩ resistors were taken from the resistor box.</li>
<li>A Rigol DS1052E is taken and will be used both to measure the output and as a ground.</li>
<li>Part of the setup is constructed on the breadboard, to be continued tomorrow.</li>
</ul></li>
<li>End of session. Plan for tomorrow:
<ul class="org-ul">
<li>finish constructing the setup;</li>
<li>measure output with input shorted and with resistor;</li>
<li>analyse the output to determine whether the system works correctly and if so, is sufficiently good.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb245622" class="outline-2">
<h2 id="orgb245622">Session 2</h2>
<div class="outline-text-2" id="text-orgb245622">
<p>
Session 2, 24th of April 2024
</p>
<ul class="org-ul">
<li><p>
The rest of the circuit is constructed on the breadboard.
The ground is connected to the ground of the oscilloscope.
The output is connected to the oscilloscope input and the ground.
An image of the setup is shown in Figure <a href="#orgda00d25">1</a>
</p>


<figure id="orgda00d25">
<a href="images/20240424_144541_breadboard.jpg" width="70%"><img src="images/20240424_144541_breadboard_small.jpg" alt="20240424_144541_breadboard_small.jpg" width="70%"></a>

<figcaption><span class="figure-number">Figure 1: </span>A photograph of the breadboard with the setup, represented by Figure 1 in the <a href="proposal/proposal.pdf">proposal</a>.  The jumper cables in the top left and bottom left respectively connect to the positive and negative pole of the battery.  The cable on the bottom right connects to the oscilloscope ground.  The red cable on the right connects to the oscilloscope input.  The dark grey diagonal cable on the left shorts the input to the ground, and can be replaced with the resistor under test.</figcaption>
</figure></li>

<li>Some measurements of the system were taken with the input shorted, like in Figure <a href="#orgda00d25">1</a>, to measure the noise of the amplifier (and the surroundings).  There a substantial (~8 V) DC voltage present, which hinders measurements.  The oscilloscope can not measure finer than 500 mV per division before the DC offset becomes too great.  Some measurements were recorded at 500 mV/div and 1 ms, 1 μs and 50 ms, using <code>single_device.py</code>, and saved on disk with timestamp and resolution in the filename.</li>

<li>A solution to the DC problem was helpfully provided by the TAs: the channel on the oscilloscope was changed to AC coupling, as it was in DC coupling before.  The signal can now be measured at much greater voltage resolution.  The filenames of the previous data were updated to reflect that they were measured in DC mode.</li>

<li><p>
Some measurements were taken with the input shorted, in AC coupling mode.  Initially, a ~50 Hz signal dominated the output (Figure <a href="#org44c9c1a">2</a>), presumed to be AC power grid interference, based on its frequency.
After disconnecting and reconnecting the input short, this behaviour ceased (Figure <a href="#org545bde5">3</a>).
The behaviour resumed when keeping the input disconnected (Figure <a href="#orgee34c2b">4</a>).
This suggests it was a connection issue.
</p>


<figure id="org44c9c1a">
<img src="images/s2-160345-short-10mv-5ms-ac_v-t.png" alt="s2-160345-short-10mv-5ms-ac_v-t.png" width="70%">

<figcaption><span class="figure-number">Figure 2: </span>\(V(t)\) measured with the input shorted, with resolution 10 mV / div., 5 ms / div.  The frequency of the large oscillations is approximately 50 Hz, suggestion it is interference from the AC power grid.</figcaption>
</figure>


<figure id="org545bde5">
<img src="images/s2-162029-short-5mv-5ms-ac_v-t.png" alt="s2-162029-short-5mv-5ms-ac_v-t.png" width="70%">

<figcaption><span class="figure-number">Figure 3: </span>\(V(t)\) measured with the input shorted, with resolution 10 mV / div., 5 ms / div.  The 50 Hz oscillations are gone, and remained gone with subsequent measurements.  \(V_{\mathrm{RMS}} ≈ 2.3\text{ mV}\).</figcaption>
</figure>


<figure id="orgee34c2b">
<img src="images/s2-163356-void-5mv-5ms-ac_v-t.png" alt="s2-163356-void-5mv-5ms-ac_v-t.png" width="70%">

<figcaption><span class="figure-number">Figure 4: </span>\(V(t)\) measured with the input disconnected, with resolution 10 mV / div., 5 ms / div.  The oscillations are again approximately 50 Hz, like Figure <a href="#org44c9c1a">2</a>.  This persists with subsequent measurements.</figcaption>
</figure></li>

<li>End of session.  Plan for next session:

<ul class="org-ul">
<li>Take some more shorted measurements for background noise determination;</li>

<li>Measure some resistors;</li>

<li>Modify the setup by using two 9 V batteries, to power the op amps with +9 V and -9 V instead of +9 V and 0 V.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgeae1c80" class="outline-2">
<h2 id="orgeae1c80">Session 3</h2>
<div class="outline-text-2" id="text-orgeae1c80">
<p>
Session 3, 26th of April 2024
</p>
<ul class="org-ul">
<li>The setup is connected and the signal is visually checked on the oscilloscope to check if everything is still connected properly.  Everything looks the same as last time.</li>
<li>Some more data with the input shorted was recorded, with 10 ms / div. and 500 μs / div.</li>
<li>Four measurements with 10 ms / div. and four with 500 μs / div. give respectively \(V_{RMS} \approx 1.29\ \pm\ 0.07\ \text{mV}\) and \(V_{RMS} \approx 1.52\ \pm\ 0.12\ \text{mV}\).  The error is the standard deviation.</li>
<li>Several different resistors I have on hand are put under test, and several oscilloscope traces will be recorded for each, with the smallest voltage per division allowed without frequent clipping, and with both 10 ms and 500 us time settings.
<dl class="org-dl">
<dt>390 &Omega;</dt><dd>5 mV / div. can be used without clipping most of the time.
Ten measurements have been taken with each setting.</dd>
<dt>39 k&Omega;</dt><dd>The same settings and procedures are used.
As a preliminary judgement, the noise looks no different than with 390 &Omega;.</dd>
<dt>10 M&Omega;</dt><dd>The signal seems slightly noisier, judging by the \(V_{\mathrm{RMS}}\) readout, but the AC interference is now visible again (Figure <a href="#orgace67bc">5</a>), though to a lesser degree than with the input disconnected.</dd>
</dl></li>
<li><p>
The calculated \(V_{\mathrm{RMS}}\) are recorded in table <a href="#org420befd">1</a>.
</p>
<figure id="org06ac464">
<table id="org420befd">
<caption class="t-above"><span class="table-number">Table 1:</span> The calculated \(V_{\mathrm{RMS}}\) for each resistor with both time resolutions.  The error is obtained by taking the standard deviation of the ten calculated values.</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">\(R\text{ Ω}\)</th>
<th scope="col" class="org-left">\(V_{\mathrm{RMS}}\ (\text{mV, }10\text{ ms})\)</th>
<th scope="col" class="org-left">\(V_{\mathrm{RMS}}\ (\text{mV, }500\text{μs})\)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">390</td>
<td class="org-left">1.37 ± 0.16</td>
<td class="org-left">1.41 ± 0.12</td>
</tr>

<tr>
<td class="org-left">39 k</td>
<td class="org-left">1.28 ± 0.08</td>
<td class="org-left">1.37 ± 0.10</td>
</tr>

<tr>
<td class="org-left">10 M</td>
<td class="org-left">1.61 ± 0.10</td>
<td class="org-left">1.51 ± 0.10</td>
</tr>
</tbody>
</table>
</figure></li>
</ul>


<figure id="orgace67bc">
<img src="images/s3-152841-10M-5mv-10ms-ac_v-t.png" alt="s3-152841-10M-5mv-10ms-ac_v-t.png" width="70%">

<figcaption><span class="figure-number">Figure 5: </span>\(V(t)\) measured with a 10 MΩ resistor connected.  Like with the input disconnected, AC interference is visibly present.  The signal <i>is</i> distinct from a signal with no connection, so it is not likely a connection issue.</figcaption>
</figure>
<ul class="org-ul">
<li>The noise is unexpectedly lower at 39 kΩ than at 390 Ω.  10 MΩ is higher, so it may be worth measuring some resistors in between.</li>
<li>Before measuring more, last session's suggestion to use two batteries is implemented.  Two batteries are connected in series.  The positive pole is connected to the positive power rail.  The negative has been connected to the top-right negative power rail.  The other three negative power rails are still ground.</li>
<li>End of session.  Plan for next session:
<ul class="org-ul">
<li>Redo some measurements with the changed setup;</li>
<li>Investigate the possibility of using the myDAQ instead of the oscilloscope;</li>
<li>Measure gain using function generator or myDAQ.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org84f31d0" class="outline-2">
<h2 id="org84f31d0">Session 4</h2>
<div class="outline-text-2" id="text-org84f31d0">
<p>
Session 4, 30th of April 2024
</p>
<ul class="org-ul">
<li>The setup has been connected to a NI myDAQ with TOO interface.  The input, which was previously connected to the oscilloscope, is now connected to AI1.  The ground is now connected to AGND.</li>
<li><p>
The resistors are measured again using the myDAQ, controlled by Python.  The resistor will be measured for 100,000 samples with 100,000 samples per second, after which the standard deviation is used to determine the noise \(V_{\mathrm{RMS}}\).  This process is repeated ten times per resistor.  The obtained values for \(V_{\mathrm{RMS}}\) are averaged to obtain the final value, and the standard deviation is taken to see how an uncertainty due to fluctuation over time.  The results are shown in Table <a href="#orga0920e7">2</a>.  Like before, the 10 MΩ resistor shows AC interference, shown in Figure <a href="#org9952838">6</a>.
</p>

<figure id="orga778b6d">
<table id="orga0920e7">
<caption class="t-above"><span class="table-number">Table 2:</span> The \(V_{\mathrm{RMS}}\) of various resistors measured with the myDAQ.</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">\(R\ (\text{Ω})\)</th>
<th scope="col" class="org-left">\(V_{\mathrm{RMS}\ (\text{mV})}\)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&sim; 0</td>
<td class="org-left">0.43 ± 0.01</td>
</tr>

<tr>
<td class="org-left">390</td>
<td class="org-left">0.44 ± 0.01</td>
</tr>

<tr>
<td class="org-left">39k</td>
<td class="org-left">0.44 ± 0.02</td>
</tr>

<tr>
<td class="org-left">1M</td>
<td class="org-left">0.43 ± 0.02</td>
</tr>

<tr>
<td class="org-left">10M</td>
<td class="org-left">0.66 ± 0.01</td>
</tr>
</tbody>
</table>
</figure>


<figure id="org9952838">
<img src="images/mydaq_10M-t.png" alt="mydaq_10M-t.png" width="70%">

<figcaption><span class="figure-number">Figure 6: </span>Strong AC interference in a \(V(t)\) measurement of a 10 MΩ resistor taken with the myDAQ.</figcaption>
</figure></li>
<li><p>
While not visible, AC interference is strongly present with the lower resistances as well, see Figure <a href="#org0986335">7</a>.
</p>


<figure id="org0986335">
<img src="images/fft_390.png" alt="fft_390.png" width="70%">

<figcaption><span class="figure-number">Figure 7: </span>Fourier transform of a \(V(t)\) measurement of a 390 Ω resistor.  A strong peak is visible at 50 Hz.</figcaption>
</figure></li>
<li><p>
In an attempt to determine whether using a high-pass filter is useful, some measurements where taken with the frequencies below 60 Hz digitally removed.
</p>

<figure id="orgc57dd41">
<table id="org2f1aa4e">


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">\(R\ (\text{Ω})\)</th>
<th scope="col" class="org-left">\(V_{\mathrm{RMS}\ (\text{mV})}\)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&sim; 0</td>
<td class="org-left">0.41 ± 0.01</td>
</tr>

<tr>
<td class="org-left">390</td>
<td class="org-left">0.415 ± 0.005</td>
</tr>

<tr>
<td class="org-left">39k</td>
<td class="org-left">0.411 ± 0.003</td>
</tr>

<tr>
<td class="org-left">1M</td>
<td class="org-left">0.515 ± 0.006</td>
</tr>

<tr>
<td class="org-left">5M</td>
<td class="org-left">0.53 ± 0.01</td>
</tr>

<tr>
<td class="org-left">10M</td>
<td class="org-left">0.401 ± 0.002</td>
</tr>
</tbody>
</table>
</figure></li>
</ul>
</div>
</div>
<div id="outline-container-orgc7747a3" class="outline-2">
<h2 id="orgc7747a3">Session 5</h2>
<div class="outline-text-2" id="text-orgc7747a3">
<p>
Session 5, 1st of March 2024
</p>
<ul class="org-ul">
<li><p>
To determine the transfer function of the system, the input is connected to the myDAQ's AO0.  The output is connected to AI0, and AO0 is also directly connected to AI1.  The myDAQ now sends a series of sinusoidal signals, ranging from 1 to 50,000 Hz, with an amplitude of 0.1 V, 100,000 samples per measurement, and 10 periods per signal.
</p>

<p>
By comparing the amplitude of the system output and the input at each frequency, the transfer function can be obtained, which is shown in Figure <a href="#orgf8b33c0">8</a>.  Figure <a href="#org0cf62fa">9</a> shows one the input and output of one of the measurements.  The output is much smaller than the input, which indicates something is wrong.  This phenomenon appeared in many of the measured signals.
</p>


<figure id="orgf8b33c0">
<img src="images/s5-rubbish-transfer.svg" alt="s5-rubbish-transfer.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 8: </span>The obtained transfer function.  The result is very noisy and not at all what is expected.</figcaption>
</figure>


<figure id="org0cf62fa">
<img src="images/s5-rubbish-io-32.4_Hz.svg" alt="s5-rubbish-io-32.4_Hz.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 9: </span>The input and output signals compared at ~32.4 Hz.  Note that the output signal had a substantial DC component, which is removed here.  The output is significantly smaller than the input, which is quite the opposite of the intended effect.</figcaption>
</figure></li>

<li><p>
Another problem plaguing the characterisation of the gain is the delay between starting the writing of the signal and reading the output.  This is already visible in Figure <a href="#org0cf62fa">9</a>, as the first of the ten peaks is missing, and the end shows some signal where input has already ceased.  This is much more pronounced at higher frequencies.
</p>

<p>
This is an issue that should be fixed in the code used for using the myDAQ.  A simple workaround would be to measure many more than 10 waves, but this would significantly increase the time it takes.
</p></li>

<li>The system was connected to a function generator (Siglent SDG830) and oscilloscope to troubleshoot.  The results are similar to those before, tested at various amplitudes between 1 V and 10 mV, at frequencies in the kHz range.</li>

<li><p>
Helpful TA intervention revealed that I had neglected to ground the batteries.  The two 9 V batteries are connected in series.  The positive side applies a voltage to the JFET drain and the op amps' positive supply input.  The negative side connects to the op amps' negative supply input.  The circuit is grounded to the oscilloscope or myDAQ.  The batteries, however, were not grounded at all.  Now, the batteries are connected, through a point between the batteries, to the common ground.  See Figure <a href="#orgf465558">10</a>.  This seems to resolve the issue.  One oscilloscope trace of the working system is shown in Figure <a href="#orgfcf75c8">11</a>.
</p>


<figure id="orgf465558">
<img src="images/20240501_173932_batteries_small.jpg" alt="20240501_173932_batteries_small.jpg" width="50%">

<figcaption><span class="figure-number">Figure 10: </span>The batteries connected properly.  The left and right cables connect to -9 V and +9 V on the breadboard respectively.  The central cable connects to the common ground.  This ground connection was missing earlier.</figcaption>
</figure>


<figure id="orgfcf75c8">
<img src="images/s5-good-io-oscilloscope.svg" alt="s5-good-io-oscilloscope.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 11: </span>An oscilloscope trace of the input and output signal of the fixed system, driven using frequency 1 kHz, amplitude 4 mV with the function generator.  Note the different scales: the input signal has an amplitude of around 4 mV, as set on the function generator, but the output has an amplitude of approximately 10 V.</figcaption>
</figure></li>

<li>The connection of the battery to the ground is very sensitive.  It often seems to not connect properly, giving a very noise, useless signal.  Reconnecting or slightly bending the input until it works again fixes the issue.  At one point, the gain notably increased, clipping the output signal.  This could not be reproduced.</li>

<li>The setup is moved over on the desk, as to make more efficient use of the space available.  This required disconnecting and reconnecting parts of the setup.  The setup has been connected to the oscilloscope to verify that it is connected properly.  After fiddling a bit with the battery ground connector and the +9 V jumper cable, the setup works again.  Interestingly, the gain seems to have increased.  A 4 mV, 1 kHz sine like before now produces a heavily malformed output.  Increasing or decreasing the frequency enough to end up in the lower gain region leads to a clean sine output again.</li>

<li><p>
The signal generator only goes down to 4 mV, but the myDAQ can go lower.  At 1 mV, 1 kHz, the myDAQ can measure a recognisable signal, shown in Figure <a href="#org7a44007">12</a>.  Figure <a href="#org6218517">13</a> shows the FFT of the output signal, showing a clearly identifiable peak at he right frequency.
</p>


<figure id="org7a44007">
<img src="images/s5-powered-mydaq-1kHz-1mV.svg" alt="s5-powered-mydaq-1kHz-1mV.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 12: </span>Input and output signals measured with the myDAQ of the system driven by a 1 kHz, 1 mV signal from the myDAQ.  The signals look messy and not quite centred at 0 V, but are still recognisable.</figcaption>
</figure>


<figure id="org6218517">
<img src="images/s5-powered-mydaq-1kHz-1mV-fft.svg" alt="s5-powered-mydaq-1kHz-1mV-fft.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 13: </span>The FFT of the output signal shown in Figure <a href="#org7a44007">12</a>.  A clear peak is visible at 1000 Hz, which is the frequency with which the system is driven.</figcaption>
</figure></li>
</ul>
</div>
</div>
<div id="outline-container-org7bf7bc2" class="outline-2">
<h2 id="org7bf7bc2">Session 6</h2>
<div class="outline-text-2" id="text-org7bf7bc2">
<p>
Session 6, 3rd of March 2024
</p>
<ul class="org-ul">
<li>The system was quickly tested to verify that it still works.  It does.</li>
<li>Some attempts were made to measure a transfer function by writing sinusoidal signals of various frequencies and reading the input and output signals.  Both writing and reading are done with the myDAQ.  This did not work out well, as the myDAQ does not support a trigger, so reading the entire output signal proved difficult.</li>
<li>A <i>lot</i> of time has been spent on modifying the python code used to read and write with the myDAQ.  There were some mistakes in the code, which was written without the ability to test it beforehand, which took some time to fix.  This debugging is mostly not written down, as that would be most tedious and not very productive, but this makes the journal for this session look very sparse.</li>
<li>Because the myDAQ does not support triggers, there is a delay between starting the reading and writing.  I settled on writing a zero padding of half a second before and after the signal.  The signal consists of an integer amount of sine periods: 10 or however many almost fit in 1 second, whichever is greater.  The minimum time of 1 second is chosen so that the noise in the zero-padding does not dominate the signal.  The input signal has an amplitude of only 1 mV, as to avoid saturating the op amps, so background noise and interference is rather significant.</li>
<li>Now that the method seems to work, as indicated by a few test signals, a large transfer function measurement was started: 1 Hz to 100 kHz, 20 measurements per octave, amplitude +1 mV<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>, sample rate 200,000 Hz (the highest the myDAQ is capable of).</li>
<li>For later analysis, the results of each sine of the transfer function measurement is saved to disk.  This is a lot of data and takes very long to write using <code>numpy.savetxt</code>.  <code>numpy.save</code> is significantly faster.  To get the measurement done faster, the decision was made to save all the data in memory, and write to disk when all measuring was done.  With the large measurement, this led to a catastrophic out-of-memory situation, which a forced reboot as only solution.  This was a tedious ordeal which wasted even more time.</li>
<li><p>
The code is fixed.  Because time is running out, only a small measurement with identical settings, but 2 frequencies per octave was performed.  The result is shown in Figure <a href="#org13c8ef5">14</a>.
</p>


<figure id="org13c8ef5">
<img src="images/s6-transfer.svg" alt="s6-transfer.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 14: </span>A transfer function of the system measured with sine waves from 1 Hz to 100 kHz, 2 frequencies per octave, amplitude 1 mV, sample rate 200 kHz.  The strange concave plateau suggests that something is amiss.</figcaption>
</figure></li>

<li><p>
It turns out that the output is still clipped at large gains, see Figure <a href="#orgc7d31ef">15</a>.  This is because I accidentally used 10 mV instead of the intended 1 mV.  4 mV was already known to be too much, so clipping at 10 mV is no surprise.
</p>


<figure id="orgc7d31ef">
<img src="images/s6-clipped_io-1.33_kHz.svg" alt="s6-clipped_io-1.33_kHz.svg" class="org-svg" width="70%">

<figcaption><span class="figure-number">Figure 15: </span>Input and output signal at ~1.33 kHz.  The output signal is clipped, which explains the behaviour in Figure <a href="#org13c8ef5">14</a>.  It also reveals that the output was set to 10 mV, not 1 mV, which is a mistake.</figcaption>
</figure></li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
Actually 10 mV, by accident, which is discovered later. 
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Created: 2024-05-06 Mon 15:17</p>
</div>
</body>
</html>
